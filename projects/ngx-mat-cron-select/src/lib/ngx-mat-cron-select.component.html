<div class="ngx-mat-cron-select">
  <mat-tab-group [selectedIndex]="selectedTab()" (selectedIndexChange)="manuallySelectedTab.set($event)">
    <mat-tab [label]="'ngxMatCronSelect.tabLabel.hour' | translateOrUseDefault: 'Hour'">
      <div class="vertical-flex-with-gap">
        <nmcs-minute-select
          class="fixed-width-select"
          [formControl]="inputsFormGroup().controls.minute"
        ></nmcs-minute-select>
      </div>
    </mat-tab>
    <mat-tab [label]="'ngxMatCronSelect.tabLabel.day' | translateOrUseDefault: 'Day'">
      <div class="vertical-flex-with-gap">
        <ng-template [ngTemplateOutlet]="hourAndMinuteSelect"></ng-template>
      </div>
    </mat-tab>
    <mat-tab [label]="'ngxMatCronSelect.tabLabel.week' | translateOrUseDefault: 'Week'">
      <div class="vertical-flex-with-gap">
        <ng-template [ngTemplateOutlet]="hourAndMinuteSelect"></ng-template>
        <nmcs-day-of-week-select
          class="fixed-width-select"
          [formControl]="inputsFormGroup().controls.dayOfWeek"
        ></nmcs-day-of-week-select>
      </div>
    </mat-tab>
    <mat-tab [label]="'ngxMatCronSelect.tabLabel.month' | translateOrUseDefault: 'Month'">
      <div class="vertical-flex-with-gap">
        <ng-template [ngTemplateOutlet]="hourAndMinuteSelect"></ng-template>
        <nmcs-day-of-month-select
          class="fixed-width-select"
          [formControl]="inputsFormGroup().controls.dayOfMonth"
        ></nmcs-day-of-month-select>
      </div>
    </mat-tab>
    <mat-tab [label]="'ngxMatCronSelect.tabLabel.year' | translateOrUseDefault: 'Year'">
      <div class="vertical-flex-with-gap">
        <ng-template [ngTemplateOutlet]="hourAndMinuteSelect"></ng-template>
        <div class="side-by-side-container">
          @for (monthOrDay of monthAndDayOrder; track monthOrDay) {
            @if (monthOrDay === 'day') {
              <nmcs-day-of-month-select
                class="fixed-width-select"
                [formControl]="inputsFormGroup().controls.dayOfMonth"
              ></nmcs-day-of-month-select>
            } @else {
              <nmcs-month-of-year-select
                class="fixed-width-select"
                [formControl]="inputsFormGroup().controls.monthOfYear"
              ></nmcs-month-of-year-select>
            }
          }
        </div>
      </div>
    </mat-tab>
  </mat-tab-group>
</div>

<ng-template #hourAndMinuteSelect>
  <div class="side-by-side-container">
    <nmcs-hour-select class="fixed-width-select" [formControl]="inputsFormGroup().controls.hour"></nmcs-hour-select>
    <nmcs-minute-select
      class="fixed-width-select"
      [formControl]="inputsFormGroup().controls.minute"
    ></nmcs-minute-select>
  </div>
</ng-template>
